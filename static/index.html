<!doctype html>
<html>
<head>
	<title>Karaoke</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript">
		var currentTime = function(){
			return document.getElementById('muziq').currentTime;
		};
		
		var setText = function(lines){
				var count = 0;
				setInterval(function(){
					if(lines[count].time <= currentTime()+3){
						$('#current').text(lines[count].lyric);
						count ++;
					}
			}, 500);
		};
		$(function(){

			document.getElementById('muziq').play();

			$.get('lyrics', function(data){
				var lines =  data.timeLyricPairs;
				console.log(lines);
				setText(lines);
			});
			
			
		})
	</script>
</head>
	<body>
		<h1 id="title">Karaoke</h1>
		<h2 id="current"></h2>
		<audio id="muziq" src="audio/paradise.ogg" preload="auto" controls></audio>
		<button id="tellme" >tell me the time</button>
		
	</body>
</html>
